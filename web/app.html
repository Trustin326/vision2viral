<!DOCTYPE html>
<html>
<head>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<title>Dashboard</title>

<style>

body{
margin:0;
font-family:Inter;
background:#f4f7fb;
}

/* HEADER */
.header{
background:linear-gradient(90deg,#0fb9b1,#0aa39c);
color:white;
padding:20px 40px;
font-size:28px;
font-weight:600;
}

/* NAV */
.nav{
background:#0a2540;
padding:15px;
display:flex;
gap:10px;
}

.nav button{
background:#173b63;
border:none;
color:white;
padding:10px 18px;
border-radius:20px;
cursor:pointer;
}

/* METRICS */
.metrics{
display:flex;
gap:20px;
padding:30px;
}

.card{
background:white;
padding:25px;
border-radius:15px;
flex:1;
box-shadow:0 10px 30px rgba(0,0,0,.08);
}

/* MAIN GRID */
.main{
display:grid;
grid-template-columns:1fr 1fr;
gap:20px;
padding:30px;
}

.panel{
background:white;
padding:30px;
border-radius:15px;
box-shadow:0 10px 30px rgba(0,0,0,.08);
}

</style>

</head>

<body>

<div class="header">
Vision2Viral Dashboard
</div>

<div class="nav">
<button>Dashboard</button>
<button>Generate</button>
<button>Bulk</button>
<button>Calendar</button>
<button>Affiliate</button>
<button>Team</button>
<button>Admin</button>
</div>

<div class="metrics">

<div class="card">
<h3>Generations Today</h3>
<h1>24</h1>
</div>

<div class="card">
<h3>Total Generations</h3>
<h1>1240</h1>
</div>

<div class="card">
<h3>Active Projects</h3>
<h1>12</h1>
</div>

</div>

<div class="main">

<div class="panel">
<h3>AI Generate</h3>
<input type="file" id="img">
<button onclick="generate()">Generate</button>
<div id="out"></div>
</div>

<div class="panel">
<h3>Recent Activity</h3>
<ul>
<li>Generated TikTok caption</li>
<li>Uploaded batch images</li>
<li>Created content calendar</li>
</ul>
</div>

</div>

<script>

const supabase = window.supabase.createClient(
"YOUR_SUPABASE_URL",
"YOUR_SUPABASE_ANON_KEY"
)

checkSession()

async function checkSession(){

let { data:{ session } } = await supabase.auth.getSession()

if(!session) location.href = "../login.html"

}

async function generate(){

let file = document.getElementById("img").files[0]

let { data:{ session } } = await supabase.auth.getSession()

let res = await fetch("/api/generate",{
method:"POST",
headers:{
"Authorization":"Bearer "+session.access_token,
"Content-Type":"application/json"
},
body:JSON.stringify({})
})

let json = await res.json()

document.getElementById("out").innerText =
JSON.stringify(json.output,null,2)

}

</script>

</body>
</html>
